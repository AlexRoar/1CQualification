\hypertarget{a00886}{}\doxysection{String\+Match\+::Small\+Searcher Class Reference}
\label{a00886}\index{StringMatch::SmallSearcher@{StringMatch::SmallSearcher}}


Searches for occurrence of pattern in string.  




{\ttfamily \#include $<$Small\+Searcher.\+h$>$}



Inheritance diagram for String\+Match\+::Small\+Searcher\+:
% FIG 0


Collaboration diagram for String\+Match\+::Small\+Searcher\+:
% FIG 1
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{a00886_a924a12616debdd0c9bdef2d90cf6b79d}{Small\+Searcher}} (const std\+::string\+\_\+view \&\mbox{\hyperlink{a00886_a948eea43f552919ca8e2796e8ac54aa2}{text}})
\begin{DoxyCompactList}\small\item\em Complexity\+: O(1) \end{DoxyCompactList}\item 
\mbox{\hyperlink{a00886_a90e88ee64f48ac49f5f3be2949a4f012}{$\sim$\+Small\+Searcher}} () override=default
\item 
std\+::vector$<$ size\+\_\+t $>$ \mbox{\hyperlink{a00886_a14bb2e34d3313c1a6ba984055dd71f92}{get\+Entrances}} (const std\+::string \&pattern) override
\begin{DoxyCompactList}\small\item\em Complexity\+: O($\vert$text$\vert$) \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename T $>$ }\\std\+::vector$<$ size\+\_\+t $>$ \mbox{\hyperlink{a00886_af93f84121ed38f57fcd21c504ac36d94}{search\+Batched}} (const std\+::string \&pattern)
\begin{DoxyCompactList}\small\item\em Search of pattern, optimized for pattern of length 2, 4, and 8. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
const std\+::string\+\_\+view \mbox{\hyperlink{a00886_a948eea43f552919ca8e2796e8ac54aa2}{text}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Searches for occurrence of pattern in string. 

Utilizes Ukkonen\textquotesingle{}s compressed tree algorithm 

Definition at line \mbox{\hyperlink{a00023_source_l00014}{14}} of file \mbox{\hyperlink{a00023_source}{Small\+Searcher.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{a00886_a924a12616debdd0c9bdef2d90cf6b79d}\label{a00886_a924a12616debdd0c9bdef2d90cf6b79d}} 
\index{StringMatch::SmallSearcher@{StringMatch::SmallSearcher}!SmallSearcher@{SmallSearcher}}
\index{SmallSearcher@{SmallSearcher}!StringMatch::SmallSearcher@{StringMatch::SmallSearcher}}
\doxysubsubsection{\texorpdfstring{SmallSearcher()}{SmallSearcher()}}
{\footnotesize\ttfamily String\+Match\+::\+Small\+Searcher\+::\+Small\+Searcher (\begin{DoxyParamCaption}\item[{const std\+::string\+\_\+view \&}]{text }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Complexity\+: O(1) 


\begin{DoxyParams}{Parameters}
{\em text} & text to use \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{a00026_source_l00008}{8}} of file \mbox{\hyperlink{a00026_source}{Small\+Searcher.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00008                                                            :}
\DoxyCodeLine{00009             \mbox{\hyperlink{a00886_a948eea43f552919ca8e2796e8ac54aa2}{text}}(\mbox{\hyperlink{a00886_a948eea43f552919ca8e2796e8ac54aa2}{text}}) \{}
\DoxyCodeLine{00010 }
\DoxyCodeLine{00011     \}}

\end{DoxyCode}
\mbox{\Hypertarget{a00886_a90e88ee64f48ac49f5f3be2949a4f012}\label{a00886_a90e88ee64f48ac49f5f3be2949a4f012}} 
\index{StringMatch::SmallSearcher@{StringMatch::SmallSearcher}!````~SmallSearcher@{$\sim$SmallSearcher}}
\index{````~SmallSearcher@{$\sim$SmallSearcher}!StringMatch::SmallSearcher@{StringMatch::SmallSearcher}}
\doxysubsubsection{\texorpdfstring{$\sim$SmallSearcher()}{~SmallSearcher()}}
{\footnotesize\ttfamily String\+Match\+::\+Small\+Searcher\+::$\sim$\+Small\+Searcher (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [default]}}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{a00886_a14bb2e34d3313c1a6ba984055dd71f92}\label{a00886_a14bb2e34d3313c1a6ba984055dd71f92}} 
\index{StringMatch::SmallSearcher@{StringMatch::SmallSearcher}!getEntrances@{getEntrances}}
\index{getEntrances@{getEntrances}!StringMatch::SmallSearcher@{StringMatch::SmallSearcher}}
\doxysubsubsection{\texorpdfstring{getEntrances()}{getEntrances()}}
{\footnotesize\ttfamily std\+::vector$<$ size\+\_\+t $>$ String\+Match\+::\+Small\+Searcher\+::get\+Entrances (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{pattern }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Complexity\+: O($\vert$text$\vert$) 


\begin{DoxyParams}{Parameters}
{\em pattern} & pattern to search \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
indexes of all entries 
\end{DoxyReturn}


Implements \mbox{\hyperlink{a01058_a94fb8fd79594c34846a0755174df1e80}{String\+Match\+::\+Matcher\+Interface}}.



Definition at line \mbox{\hyperlink{a00026_source_l00013}{13}} of file \mbox{\hyperlink{a00026_source}{Small\+Searcher.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00013                                                                           \{}
\DoxyCodeLine{00014         \textcolor{keywordflow}{if} (pattern.size() != 1 \&\& pattern.size() != 2 \&\& pattern.size() != 4 \&\& pattern.size() != 8) \{}
\DoxyCodeLine{00015             \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"{}Cannot use SmallSearcher for pattern with specified length"{}});}
\DoxyCodeLine{00016         \}}
\DoxyCodeLine{00017 }
\DoxyCodeLine{00018         \textcolor{keywordflow}{if} (\mbox{\hyperlink{a00886_a948eea43f552919ca8e2796e8ac54aa2}{text}}.size() < pattern.size())}
\DoxyCodeLine{00019             \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{00020 }
\DoxyCodeLine{00021         std::vector<size\_t> entrances;}
\DoxyCodeLine{00022         \textcolor{keywordflow}{if} (pattern.size() == 8) \{}
\DoxyCodeLine{00023             entrances = searchBatched<uint64\_t>(pattern);}
\DoxyCodeLine{00024         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (pattern.size() == 4) \{}
\DoxyCodeLine{00025             entrances = searchBatched<uint32\_t>(pattern);}
\DoxyCodeLine{00026         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (pattern.size() == 2) \{}
\DoxyCodeLine{00027             entrances = searchBatched<uint16\_t>(pattern);}
\DoxyCodeLine{00028         \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{// pattern.size() == 1}}
\DoxyCodeLine{00029             \textcolor{keyword}{const} \textcolor{keywordtype}{char}* textPacked = (\mbox{\hyperlink{a00886_a948eea43f552919ca8e2796e8ac54aa2}{text}}.begin());}
\DoxyCodeLine{00030             \textcolor{keywordtype}{size\_t} lastPos = -\/1;}
\DoxyCodeLine{00031             \textcolor{keywordtype}{char} pat = pattern[0];}
\DoxyCodeLine{00032             \textcolor{keywordflow}{while} (\textcolor{keyword}{true}) \{}
\DoxyCodeLine{00033                 \textcolor{keyword}{auto} newEntry = strchr(textPacked + lastPos + 1, pat);}
\DoxyCodeLine{00034                 \textcolor{keywordflow}{if}(newEntry == \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00035                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00036                 lastPos = size\_t(newEntry -\/ textPacked);}
\DoxyCodeLine{00037                 entrances.push\_back(lastPos);}
\DoxyCodeLine{00038             \}}
\DoxyCodeLine{00039         \}}
\DoxyCodeLine{00040         \textcolor{keywordflow}{return} entrances;}
\DoxyCodeLine{00041     \}}

\end{DoxyCode}


References \mbox{\hyperlink{a00023_source_l00040}{text}}.



Referenced by \mbox{\hyperlink{a00044_source_l00018}{String\+Match\+::\+String\+Matcher\+::get\+Entrances()}}.

Here is the caller graph for this function\+:
% FIG 2
\mbox{\Hypertarget{a00886_af93f84121ed38f57fcd21c504ac36d94}\label{a00886_af93f84121ed38f57fcd21c504ac36d94}} 
\index{StringMatch::SmallSearcher@{StringMatch::SmallSearcher}!searchBatched@{searchBatched}}
\index{searchBatched@{searchBatched}!StringMatch::SmallSearcher@{StringMatch::SmallSearcher}}
\doxysubsubsection{\texorpdfstring{searchBatched()}{searchBatched()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
std\+::vector$<$ size\+\_\+t $>$ String\+Match\+::\+Small\+Searcher\+::search\+Batched (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{pattern }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Search of pattern, optimized for pattern of length 2, 4, and 8. 


\begin{DoxyTemplParams}{Template Parameters}
{\em T} & uint\{16, 32, 64\}\+\_\+t \\
\hline
\end{DoxyTemplParams}

\begin{DoxyParams}{Parameters}
{\em pattern} & pattern to search \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
indexes of all entries 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{a00026_source_l00044}{44}} of file \mbox{\hyperlink{a00026_source}{Small\+Searcher.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00044                                                                            \{}
\DoxyCodeLine{00045         std::vector<size\_t> entrances;}
\DoxyCodeLine{00046 }
\DoxyCodeLine{00047         T patternPacked = *(T *) (pattern.c\_str());}
\DoxyCodeLine{00048         \textcolor{keyword}{const} \textcolor{keywordtype}{char}* textPacked = (\mbox{\hyperlink{a00886_a948eea43f552919ca8e2796e8ac54aa2}{text}}.begin());}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i <= \mbox{\hyperlink{a00886_a948eea43f552919ca8e2796e8ac54aa2}{text}}.size() -\/ pattern.size(); i++) \{}
\DoxyCodeLine{00051             T ptr = *(\textcolor{keyword}{const} T *) (textPacked + i);}
\DoxyCodeLine{00052             \textcolor{keywordflow}{if} (ptr == patternPacked) \{}
\DoxyCodeLine{00053                 entrances.push\_back(i);}
\DoxyCodeLine{00054             \}}
\DoxyCodeLine{00055         \}}
\DoxyCodeLine{00056         \textcolor{keywordflow}{return} entrances;}
\DoxyCodeLine{00057     \}}

\end{DoxyCode}


References \mbox{\hyperlink{a00023_source_l00040}{text}}.



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{a00886_a948eea43f552919ca8e2796e8ac54aa2}\label{a00886_a948eea43f552919ca8e2796e8ac54aa2}} 
\index{StringMatch::SmallSearcher@{StringMatch::SmallSearcher}!text@{text}}
\index{text@{text}!StringMatch::SmallSearcher@{StringMatch::SmallSearcher}}
\doxysubsubsection{\texorpdfstring{text}{text}}
{\footnotesize\ttfamily const std\+::string\+\_\+view String\+Match\+::\+Small\+Searcher\+::text\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{a00023_source_l00040}{40}} of file \mbox{\hyperlink{a00023_source}{Small\+Searcher.\+h}}.



Referenced by \mbox{\hyperlink{a00026_source_l00013}{get\+Entrances()}}, and \mbox{\hyperlink{a00026_source_l00044}{search\+Batched()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/core/algo/\mbox{\hyperlink{a00023}{Small\+Searcher.\+h}}\item 
src/core/algo/\mbox{\hyperlink{a00026}{Small\+Searcher.\+cpp}}\end{DoxyCompactItemize}
